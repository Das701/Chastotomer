#define  WR PORTCbits.RC1
#define  RDY PORTCbits.RC0
//#include <delays.h>


unsigned char SET_1[]			= {3, 0x1B, 0x74, 0x11};		//Включение кириллических шрифтов
unsigned char SET_2[]			= {3, 0x1B, 0x74, 0x00};		//Включение стандартных шрифтов
unsigned char SET_3[]			= {3, 0x1B, 0x74, 0x01};		//Включение японских шрифтов
unsigned char INVERT_SET[]		= {3, 0x1F, 0x72, 0x01};		//Включение инверсии
unsigned char INVERT_RESET[]	= {3, 0x1F, 0x72, 0x00};		//Отключение инверсии
unsigned char CLEAR_DYSP[]		= {1, 0x0C};
unsigned char MIXTURE_NORM[]	= {3, 0x1F, 0x77, 0x00};		//Смешивание
unsigned char MIXTURE_OR[]		= {3, 0x1F, 0x77, 0x01};		//Смешивание
unsigned char MIXTURE_AND[]		= {3, 0x1F, 0x77, 0x02};		//Смешивание
unsigned char MIXTURE_XOR[]		= {3, 0x1F, 0x77, 0x03};		//Смешивание
unsigned char SIZE_FONT_1[]		= {5, 0x1F, 0x28, 0x67, 0x01, 0x01};		//Размер символов 6х8
unsigned char SIZE_FONT_2[]		= {5, 0x1F, 0x28, 0x67, 0x01, 0x02};		//Размер символов 8х16
unsigned char SIZE_FONT_3[]		= {5, 0x1F, 0x28, 0x67, 0x01, 0x02};		//Размер символов 16х16
unsigned char Kanji_On[]		= {5, 0x1F, 0x28, 0x67, 0x02, 0x01};		//Включение режима японских шрифтов
unsigned char Kanji_OFF[]		= {5, 0x1F, 0x28, 0x67, 0x02, 0x00};		//Отключение режима японских шрифтов

unsigned char SET_4[]			= {10, 0x1F, 0x28, 0x67, 0x01, 0x02, 0x1F, 0x28, 0x67, 0x02, 0x01};		//Отключение режима японских шрифтов
unsigned char SET_5[]			= {10, 0x1F, 0x28, 0x67, 0x01, 0x01, 0x1F, 0x28, 0x67, 0x02, 0x00};		//Отключение режима японских шрифтов

unsigned char Freq[]			= {17, 0x1B, 0x74, 0x00,	0x1F, 0x28, 0x67, 0x01, 0x02,	0x9F,	0x1F, 0x28, 0x67, 0x01, 0x01,	0x1B, 0x74, 0x11};
unsigned char Tau[]				= {22, 0x1F, 0x28, 0x67, 0x01, 0x02, 0x1F, 0x28, 0x67, 0x02, 0x01,		0x83, 0xD1,		0x1F, 0x28, 0x67, 0x01, 0x01, 0x1F, 0x28, 0x67, 0x02, 0x00};
unsigned char T[]				= {22, 0x1F, 0x28, 0x67, 0x01, 0x02, 0x1F, 0x28, 0x67, 0x02, 0x01,		0x83, 0xB1,		0x1F, 0x28, 0x67, 0x01, 0x01, 0x1F, 0x28, 0x67, 0x02, 0x00};

unsigned char Action[]				= {6, 0x02, 0x44, 0x00, 0x53, 0x00, 0x08};



void Write_To_Display (unsigned char data);
void Cursor_Set (char x, char y);
char Cyrillic_Encod (unsigned char data);
char Text_To_Display (char x, char y, unsigned char * data);
void Command_To_Display (unsigned char * data);
void Init_Display (void);
unsigned char Im_Char_To_Display (unsigned char x, unsigned char y, unsigned char data);
//void Nomber_Image_Char(unsigned char x, unsigned char y, float data, char sign);
unsigned char Nomber(unsigned char x, unsigned char y, unsigned char length, int data);
char Image(unsigned char x, unsigned char y, unsigned char * data);
void Rectangle (char X, char Xend, char Y, char Yend, char data);
void Line (char, char, char, char);

unsigned char RAM_Im_To_Display (unsigned char x, unsigned char y, unsigned char data);

char C0=20, C1=20, C2=20, C3=20, C4=20, C5=20, C6=20, C7=20, C8=20, C9=20;
unsigned long Binary = 55;


//#define  Jerk_3		PORTBbits.RB2

#define HEIGHT		(unsigned int) 3	//Высота, деленная на 8
#define WIDTH		(unsigned int) 16	//Ширина
#define QUANTITY	(unsigned int) 14	//Количество символов


char characters[] = {
        0x00, 0x00, 0x00, 0x00, 0xFF, 0x03, 0xE0, 0xFF, 0x0F, 0xF0, 0xFF, 0x1F, 0xF8, 0xFF, 0x3F, 0xFC, 0x00, 0x7E, 0x3C, 0x00, 0x78, 0x3C, 0x00, 0x78, 0x3C, 0x00, 0x78, 0x3C, 0x00, 0x78, 0xFC, 0x00, 0x7E, 0xF8, 0xFF, 0x3F, 0xF0, 0xFF, 0x1F, 0xE0, 0xFF, 0x0F, 0x00, 0xFF, 0x01, 0x00, 0x00, 0x00,  // Code for char 0
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x07, 0x00, 0xC0, 0x03, 0x00, 0xC0, 0x03, 0x00, 0xE0, 0x01, 0x00, 0xF0, 0x00, 0x00, 0xF8, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 1
        0x00, 0x00, 0x00, 0xC0, 0x01, 0x60, 0xF0, 0x01, 0x78, 0xF8, 0x01, 0x7C, 0xF8, 0x01, 0x7E, 0x7C, 0x00, 0x7F, 0x3C, 0x80, 0x7F, 0x3C, 0xC0, 0x7B, 0x3C, 0xE0, 0x79, 0x3C, 0xF0, 0x78, 0x7C, 0x78, 0x78, 0xF8, 0x3F, 0x78, 0xF8, 0x1F, 0x78, 0xF0, 0x0F, 0x78, 0xE0, 0x03, 0x78, 0x00, 0x00, 0x00,  // Code for char 2
        0x00, 0x00, 0x00, 0xC0, 0x00, 0x07, 0xF0, 0x01, 0x0F, 0xF8, 0x01, 0x1F, 0xF8, 0x01, 0x3F, 0x7C, 0x00, 0x7C, 0x3C, 0x1C, 0x78, 0x3C, 0x1C, 0x78, 0x3C, 0x1C, 0x78, 0x7C, 0x1E, 0x78, 0xF8, 0x3F, 0x7C, 0xF8, 0xF7, 0x3F, 0xF0, 0xF3, 0x1F, 0xE0, 0xE1, 0x1F, 0x00, 0xC0, 0x07, 0x00, 0x00, 0x00,  // Code for char 3
        0x00, 0x80, 0x07, 0x00, 0xC0, 0x07, 0x00, 0xF0, 0x07, 0x00, 0xFC, 0x07, 0x00, 0x3E, 0x07, 0x80, 0x1F, 0x07, 0xE0, 0x07, 0x07, 0xF0, 0x01, 0x07, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0x00, 0x00, 0x07, 0x00, 0x00, 0x07, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00,  // Code for char 4
        0x00, 0x00, 0x00, 0x00, 0x38, 0x06, 0xE0, 0x7F, 0x1E, 0xFC, 0x7F, 0x3E, 0xFC, 0x7F, 0x3E, 0xFC, 0x3F, 0x7C, 0x3C, 0x1E, 0x78, 0x3C, 0x1E, 0x78, 0x3C, 0x1E, 0x78, 0x3C, 0x1E, 0x78, 0x3C, 0x3E, 0x7C, 0x3C, 0xFC, 0x3F, 0x3C, 0xFC, 0x1F, 0x3C, 0xF8, 0x0F, 0x00, 0xE0, 0x07, 0x00, 0x00, 0x00,  // Code for char 5
        0x00, 0x00, 0x00, 0x00, 0xFF, 0x01, 0xE0, 0xFF, 0x0F, 0xF0, 0xFF, 0x1F, 0xF8, 0xFF, 0x3F, 0xF8, 0x78, 0x3C, 0x7C, 0x3C, 0x78, 0x3C, 0x3C, 0x78, 0x3C, 0x3C, 0x78, 0x3C, 0x3C, 0x78, 0x7C, 0x7C, 0x7C, 0xF8, 0xF8, 0x3F, 0xF8, 0xF8, 0x3F, 0xF0, 0xF0, 0x1F, 0xC0, 0xC0, 0x07, 0x00, 0x00, 0x00,  // Code for char 6
        0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x78, 0x3C, 0x80, 0x7F, 0x3C, 0xF0, 0x7F, 0x3C, 0xFC, 0x7F, 0x3C, 0xFE, 0x03, 0xBC, 0x7F, 0x00, 0xFC, 0x0F, 0x00, 0xFC, 0x03, 0x00, 0xFC, 0x00, 0x00, 0x7C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 7
        0x00, 0x00, 0x00, 0xE0, 0xC1, 0x07, 0xF0, 0xE3, 0x1F, 0xF8, 0xF7, 0x3F, 0xF8, 0xFF, 0x3F, 0x3C, 0x3E, 0x78, 0x1C, 0x1C, 0x70, 0x1C, 0x1C, 0x70, 0x1C, 0x1C, 0x70, 0x1C, 0x1C, 0x70, 0x3C, 0x3E, 0x78, 0xF8, 0xFF, 0x3F, 0xF8, 0xF7, 0x3F, 0xF0, 0xE3, 0x1F, 0xE0, 0xC1, 0x07, 0x00, 0x00, 0x00,  // Code for char 8
        0x00, 0x00, 0x00, 0xC0, 0x07, 0x06, 0xF0, 0x1F, 0x1E, 0xF8, 0x3F, 0x3E, 0xF8, 0x3F, 0x7E, 0x7C, 0x7C, 0x7C, 0x3C, 0x78, 0x78, 0x3C, 0x78, 0x78, 0x3C, 0x78, 0x78, 0x3C, 0x78, 0x7C, 0x78, 0x3C, 0x3E, 0xF8, 0xFF, 0x3F, 0xF0, 0xFF, 0x1F, 0xE0, 0xFF, 0x0F, 0x00, 0xFF, 0x01, 0x00, 0x00, 0x00,  // Code for char 9
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char  
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x8F, 0x00, 0x00, 0xCF, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char ,
		0x00, 0x00, 0x00, 0x0C, 0x00, 0x60, 0x1C, 0x00, 0x70, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0xFC, 0xFF, 0x7F, 0x1C, 0x00, 0x78, 0x0C, 0x00, 0x78, 0x00, 0x00, 0x78, 0x00, 0x00, 0x78, 0x00, 0x00, 0x78, 0x00, 0x00, 0x78, 0x00, 0x00, 0x78, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x1E,  // Code for char L
		0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00  // Code for char -
};
char image_1 [] = {8, 1,
        0x32, 0x1A, 0x1A, 0x32, 0x62, 0xC2, 0xC2, 0x62};  //Открытый вход

char image_2 [] = {8, 1,
        0x18, 0x0C, 0x0C, 0x18, 0x30, 0x60, 0x60, 0x30};  //Закрытый вход

char image_3 [] = {10, 1,
        0x04, 0x5E, 0x20, 0x10, 0x28, 0xF4, 0x02, 0x60, 0x90, 0x60};  //1/10


char image_4 [] = {8, 1,
        0x00, 0x80, 0x90, 0x88, 0xFE, 0x0A, 0x12, 0x02};  //Фронт

char image_5 [] = {8, 1,
        0x00, 0x02, 0x12, 0x22, 0xFE, 0xA0, 0x90, 0x80};  //Срез

char image_6 [] = {8, 1,
        0x08, 0x04, 0x74, 0x8C, 0x84, 0x44, 0x02, 0x00};  //Тау

char image_7 [] = {3, 1,
        0x00, 0x00, 0x00};  //Укороченный пробел

char image_8 [] = {8, 1,
        0x02, 0x4F, 0x20, 0x10, 0x08, 0x24, 0xF2, 0x00};  //	1/1

char image_9 [] = {8, 1,
        0x00, 0x80, 0xC0, 0xA0, 0x90, 0xA0, 0xC0, 0x80};  //	Дельта


char CountLab [] = {35, 2,
		0xF8, 0x1F, 0x04, 0x20, 0x02, 0x40, 0xC2, 0x47, 0x21, 0x88, 0x11, 0x88, 0x09, 0x88, 0x09, 0x88, 0x09,
 		0x84, 0x31, 0x80, 0x19, 0x80, 0x41, 0x80, 0xC1, 0x83, 0x01, 0x82, 0x01, 0x8E, 0xC1, 0x89, 0x01, 0x80,
 		0x01, 0x87, 0x81, 0x8A, 0x41, 0x8A, 0x41, 0x89, 0xC1, 0x84, 0x01, 0x80, 0x41, 0x8C, 0xC1, 0x83, 0x81,
		0x80, 0x41, 0x8C, 0xC1, 0x83, 0x81, 0x80, 0x41, 0x8C, 0xC1, 0x8B, 0x02, 0x40, 0x02, 0x40, 0x04, 0x20, 0xF8, 0x1F};


char TauLab [] = {35, 2,
		0xF8, 0x1F, 0x04, 0x20, 0x02, 0x40, 0x02, 0x40, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01,
 		0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x41, 0x80, 0x21, 0x80, 0x21, 0x80, 0x21, 0x8E,
 		0xA1, 0x91, 0x61, 0x90, 0x21, 0x90, 0x21, 0x88, 0x21, 0x80, 0x11, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01,
		 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x02, 0x40, 0x02, 0x40, 0x04, 0x20, 0xF8, 0x1F};


char FreqLab [] = {35, 2,
		0xF8, 0x1F, 0x04, 0x20, 0x02, 0x40, 0x02, 0x40, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01,
 		0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x90, 0x81, 0xA0, 0x81, 0xA0,
 		0xF9, 0x9F, 0x85, 0x80, 0x85, 0x80, 0x09, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01,
		0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x02, 0x40, 0x02, 0x40, 0x04, 0x20, 0xF8, 0x1F};

char PerLab [] = {35, 2,
		0xF8, 0x1F, 0x04, 0x20, 0x02, 0x40, 0x02, 0x40, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01,
		0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x19, 0x80, 0x09, 0x80, 0x09, 0x80, 0x09, 0x90,
		0xF9, 0x9F, 0x09, 0x90, 0x09, 0x80, 0x09, 0x80, 0x19, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01,
		0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x01, 0x80, 0x02, 0x40, 0x02, 0x40, 0x04, 0x20, 0xF8, 0x1F};

char NOT [] = {35, 1,
        0x00, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE,
		0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0x00};  // закр-откр 


char* ImageChar[] =	{image_1, image_2, image_3, image_4, image_5, image_6, image_7, image_8, image_9}; //0x90 + индекс

//***********************************************
void Write_To_Display (unsigned char data)
{
//	Delay10TCYx(1);
//	while(RDY == 0)
//	{
//	}
//
//	WR = 0;
//	PORTA = data;
//	WR = 1;
//  
}
//***********************************************
//***********************************************
void Cursor_Set (char x, char y)
{
	Write_To_Display(0x1F);
	Write_To_Display(0x24);
	Write_To_Display(x & 0xFF);
	Write_To_Display(0);
	Write_To_Display(y);
	Write_To_Display(0);
}
//***********************************************
//***********************************************
char Cyrillic_Encod (unsigned char data)
{
	if(data>0xBF && data<0xF0) return data-0x40;	//Кириллические
	if(data>0xEF && data<=0xFF) return data-0x10;	//Кириллические
	if(data==0xA8) return 0xF0;						//Ё
	if(data==0xB8) return 0xF1;						//ё
	if(data==0xAB || data==0xBB) return 0x22;		//<< >>
	if(data<0x80) return data;		//ASCII

	else return data=0x20;

}
//***********************************************

//***********************************************
char Text_To_Display (char x, char y, unsigned char * data)
{
char cnt;
	Cursor_Set(x, y);
	cnt = x;
	for(;*data!=0;data++)
	{

		if((*data > 0x8F) && (*data < 0xA0))		//Если попадает в интервал 0x90 - 0x9F
		{
			cnt = Image(cnt, y, ImageChar[(*data)-0x90]);	//Выводим рисованный символ
			Cursor_Set(cnt, y);
		}
		else			
		{
			Write_To_Display(Cyrillic_Encod(*data));//		//Выводим стандартный символ
			cnt +=6;
		}
	}
	return cnt;
}
//***********************************************
//***********************************************
void Command_To_Display (unsigned char * data)
{
char Lenght = *data;				//Первый элемент массива указывает длину командной последовательности в байтах
	for(;Lenght!=0;Lenght--)
	{
		data++;
		Write_To_Display(*data);//
	}
}
//***********************************************
//***********************************************
void Init_Display (void)
{
unsigned char c;
unsigned int a;
	Command_To_Display(SET_1);

	Write_To_Display(0x1F);
	Write_To_Display(0x28);
	Write_To_Display(0x66);
	Write_To_Display(0x01);

	Write_To_Display(0x00);
	Write_To_Display(0x00);
	Write_To_Display(0x00);

	Write_To_Display((HEIGHT * WIDTH * QUANTITY) & 255);
	Write_To_Display((HEIGHT * WIDTH * QUANTITY) >> 8);
	Write_To_Display(0x00);


		for(a=0; a< (HEIGHT*WIDTH*QUANTITY) ; a++)
		{
			c = characters[a];

			c = ((c & 0x55) << 1) | ((c & 0xAA) >> 1);
			c = ((c & 0xCC) >> 2) | ((c & 0x33) << 2);
			c = (c >> 4) | (c << 4);
			Write_To_Display(c);
		}

	Command_To_Display(MIXTURE_NORM);
	Command_To_Display(CLEAR_DYSP);
}
//***********************************************
//***********************************************
unsigned char Im_Char_To_Display (unsigned char x, unsigned char y, unsigned char data)
{
	unsigned int addr;
	addr = data;
	addr = addr*HEIGHT * WIDTH;
//addr = 45;
	Cursor_Set(x, y);

	Write_To_Display(0x1F);
	Write_To_Display(0x28);
	Write_To_Display(0x66);
	Write_To_Display(0x10);
	Write_To_Display(0x00);

	Write_To_Display(addr & 255);
	Write_To_Display(addr>>8);
	Write_To_Display(0x00);

	Write_To_Display(WIDTH/8);
	Write_To_Display(0x00);

	Write_To_Display(WIDTH);	//Ширина конкретного символа
	Write_To_Display(0x00);

	Write_To_Display(HEIGHT);
	Write_To_Display(0x00);

	Write_To_Display(0x01);

	return x + WIDTH;
}
//***********************************************
//***********************************************
unsigned char RAM_Im_To_Display (unsigned char x, unsigned char y, unsigned char data)
{
	unsigned int addr;
	addr = data;
	addr = (70*addr  + 576);//

	Cursor_Set(x, y);

	Write_To_Display(0x1F);
	Write_To_Display(0x28);
	Write_To_Display(0x66);
	Write_To_Display(0x10);
	Write_To_Display(0x00);

	Write_To_Display(addr);
	Write_To_Display(addr >> 8);
	Write_To_Display(0x00);

	Write_To_Display(2);
	Write_To_Display(0x00);

//	Write_To_Display(characters[data][0]);	//Ширина конкретного символа
	Write_To_Display(35);	//Ширина конкретного символа
	Write_To_Display(0x00);

	Write_To_Display(2);
	Write_To_Display(0x00);

	Write_To_Display(0x01);

	return x + WIDTH;
}
//***********************************************


//***********************************************
void Nomber_Image_Char(unsigned char x, unsigned char y, struct RES * DDat, char sign)
{

	char Temp, *C_Point = &C9, Point;
	signed char a, b;

	if((DDat->Data>999999999)||(DDat->Data<-99999999))//1000
	{
		Decades[0] = 0x30+10;
		Decades[1] = 0x30+10;
		Decades[2] = 0x30+10;
		Decades[3] = 0x30+10;
		Decades[4] = 0x30+0;
		Decades[5] = 0x30+12;
		Decades[6] = 0x30+10;
		Decades[7] = 0x30+10;
		Decades[8] = 0x30+10;
		Decades[9] = 0x30+10;
	}
	else 	BinToBinDec(DDat);		//Преобразуем число к двоично-десятичному виду


	for(a=0; a<10; a++)
	{
		switch(Decades[a])
		{
			case '.':
			Temp = 11;
			break;

	 	  	case ' ':
			Temp = 10;
			break;

	 	  	case 0x16:
			Temp = 10;
			break;

	 	  	case '-':
			Temp = 13;
			break;

			default:
			Temp = Decades[a] - 0x30;
			break; 
		}

		if(*(C_Point-a) != Temp)
		{
			Im_Char_To_Display (x+(a<<4), y, Temp);
			*(C_Point-a) = Temp; 
		}
	}

}
//***********************************************
//
//***********************************************
//***********************************************
unsigned char Nomber(unsigned char x, unsigned char y, unsigned char length, int data)
{
	unsigned long Temp, Temp2;

	Temp2 = length-1;
	Temp = 1;

	for(;Temp2 != 0; Temp2--)
	{
		Temp *= 10;
	}
	Cursor_Set(x, y);

	if(data<0)
	{
		Temp2 = -1*data;
		Write_To_Display('-');
		length += 1;
	}
	else Temp2 = data;


	while(1)
	{
		if((Temp2 < Temp)&& Temp>1)
		{
		//	Write_To_Display(' ');
			length -= 1;
			Temp /=10;
		}
		else break;
	}

	while(Temp)
	{
	Write_To_Display(Temp2/Temp+0x30);
	Temp2 = Temp2%Temp;
	Temp /=10;
	}
	return length*6 + x;
}
//*********************************************** 
//-----------------------------------------------------
void Rectangle (char X, char Xend, char Y, char Yend, char data)
{ // прямоугольник
//unsigned int a;
//
//	Cursor_Set(X, Y);
//
//	Write_To_Display(0x1F);
//	Write_To_Display(0x28);
//	Write_To_Display(0x66);
//	Write_To_Display(0x11);
//	Write_To_Display((Xend-X+1) & 255);
//	Write_To_Display((Xend-X+1) >> 8);
//	Write_To_Display(Yend-Y+1);
//	Write_To_Display(0x00);
//	Write_To_Display(0x01);
//
//	a = (Xend-X+1)*(Yend-Y+1);
//	
//	while(a)
//	{
//		Write_To_Display(data); 
//		a -=1;
//	}
}
//-----------------------------------------------------
//-----------------------------------------------------
void Line (char X, char Xend, char Y, char Yend)
{
	char a;
	Command_To_Display(MIXTURE_OR);

	if(Y == Yend)
	Rectangle(X, Xend, Y>>3, Yend>>3, 0x80>>(Y&7));

	if(X == Xend)
	{
		Rectangle(X, Xend, Y>>3, Y>>3, 0xFF>>(Y&7));

		for(Y += 8; (Y>>3) < (Yend>>3); Y += 8)
		{
			Rectangle(X, Xend, Y>>3, Y>>3, 0xFF);
		}

		Rectangle(X, Xend, Yend>>3, Yend>>3, 0xFF<<(7-(Yend&7)));
	}

	Command_To_Display(MIXTURE_NORM);
}
/*-----------------------------------------------------*/